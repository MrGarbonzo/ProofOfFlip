services:
  dashboard:
    image: ghcr.io/mrgarbonzo/proofofflip/dashboard:9e43787549a9730a2f202c72d8c0c5b59dbb0f7b
    ports:
      - "80:3000"
    environment:
      - DASHBOARD_PORT=3000
      - TEE_PROVIDER=secretvm
      - STORAGE_PATH=/data
      - SOLANA_RPC_URL=${SOLANA_RPC_URL}
      - ALLOWED_RTMR3=${ALLOWED_RTMR3}
      - SECRET_AI_API_KEY=${SECRET_AI_API_KEY}
    volumes:
      - dashboard-data:/data
      - ./crypto/docker_public_key_ed25519.pem:/app/data/pubkey.pem:ro
      - ./crypto/docker_attestation_ed25519.txt:/app/data/quote.txt:ro
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped

volumes:
  dashboard-data:
